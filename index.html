<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure a Raspberry Pi as a Kiosk Display</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .note {
            background-color: #e7f3fe;
            border-left: 6px solid #2196F3;
            margin-bottom: 15px;
            padding: 4px 12px;
        }
    </style>
</head>
<body>
    <h1>Configure a Raspberry Pi as a Kiosk Display</h1>
    
    <p>Our step-by-step guide to configure a Raspberry Pi as a kiosk display that runs automatically on boot.</p>

    <h2>The TL;DR (Too Long; Didn't Read)</h2>
    <p>Learn how we at reelyActive configure a Raspberry Pi as a kiosk display.</p>
    <p>The Raspberry Pi can act as a digital display driver thanks to its HDMI port.</p>

    <h2>What will this accomplish?</h2>
    <p>The Pi will automatically display a specific web page in full screen mode on any HDMI-connected screen via the Chromium browser.</p>

    <h2>Why use a Pi?</h2>
    <p>A Pi is a cost-effective and easily sourceable device for driving kiosk displays.</p>

    <h2>Does this apply only to the Pi?</h2>
    <p>The process should apply equally well to other Debian Linux-based platforms.</p>

    <h2>Prerequisites</h2>
    <p>A Raspberry Pi (or equivalent) with Raspberry Pi OS Lite installed.</p>

    <div class="note">
        <p><strong>Note:</strong> For detailed instructions on preparing a Raspberry Pi from scratch, refer to our step-by-step tutorial on how we install and configure Raspberry Pi OS Lite on a Pi.</p>
    </div>

    <h2>Installing X11 and Chromium</h2>
    <p>Install the X Window System (X11), the Chromium browser and kiosk-mode dependencies.</p>

    <h3>Do I need to SSH into the Pi?</h3>
    <p>Yes. If you forgot how, recall Step 4 from the Pi Prep tutorial.</p>

    <h3>Why X11?</h3>
    <p>Raspberry Pi OS Lite is headless, it does not include a display system by default, so the X Window System must be installed manually.</p>

    <h3>X11 and Chromium for Pi kiosk display</h3>
    <h4>Prerequisites</h4>
    <p>Both the Pi and the computer used for its configuration must be on the same network, with which they can access the Internet.</p>

    <h3>Boot the Pi and connect via SSH</h3>
    <ol>
        <li>Apply power to the Raspberry Pi</li>
        <li>Open a terminal on the computer and SSH into the Pi with the command <code>ssh pi@xxx.xxx.xxx.xxx</code> replacing the x values with the Pi's IP address</li>
        <li>When prompted enter the password (berryinsecure is the default)</li>
    </ol>

    <div class="note">
        <p>If you're still using the default password, this is as good a time as any to change it. Simply run <code>sudo raspi-config</code></p>
    </div>

    <h3>Install the X Window System (X11)</h3>
    <pre><code>sudo apt-get install --no-install-recommends xserver-xorg
sudo apt-get install --no-install-recommends xinit
sudo apt-get install --no-install-recommends x11-xserver-utils</code></pre>

    <h3>Install Chromium and kiosk dependencies</h3>
    <pre><code>sudo apt-get install chromium-browser
sudo apt-get install matchbox-window-manager xautomation unclutter
sudo apt-get install fonts-noto-color-emoji</code></pre>

    <h2>Configure boot and display options</h2>
    <p>Auto-login on boot and start kiosk mode from a script.</p>

    <h3>Why auto-login?</h3>
    <p>The pi user will launch X and Chromium, and therefore must be logged in.</p>

    <h3>Why call a script from .bashrc?</h3>
    <p>It is difficult to get Chromium to run (as the pi user) from the rc.local file.</p>

    <h3>Create the kiosk startup script</h3>
    <p>Create a new file called kiosk in the pi user's home folder with the command <code>nano ~/kiosk</code> and paste in the following template:</p>
    <pre><code>#!/bin/sh
xset -dpms     # disable DPMS (Energy Star) features.
xset s off     # disable screen saver
xset s noblank # don't blank the video device
matchbox-window-manager -use_titlebar no &
unclutter &    # hide X mouse cursor unless mouse activated
chromium-browser --display=:0 --kiosk --incognito --window-position=0,0 https://reelyactive.github.io/diy/pi-kiosk/</code></pre>

    <p>Make the kiosk script file executable with the command <code>chmod 755 ~/kiosk</code></p>

    <h3>Add the kiosk script to .bashrc</h3>
    <p>Edit the ~/.bashrc file with the command <code>nano ~/.bashrc</code> to include the following as the last line:</p>
    <pre><code>xinit /home/pi/kiosk -- vt$(fgconsole)</code></pre>

    <h3>Configure boot and display with the raspi-config tool</h3>
    <p>From the command prompt on the Pi, enter the command <code>sudo raspi-config</code> which will open a text-based menu. Update the configuration as per the following table:</p>
    <ul>
        <li>Display Options > D2 Underscan > Enable compensation? [No]</li>
        <li>System Options > S5 Boot / Auto Login > [B2 Console Autologin]</li>
    </ul>

    <p>Upon completing the above, select &lt;Finish&gt; and select &lt;Yes&gt; when prompted to reboot. If a display is connected via HDMI, following the boot sequence, the Chromium browser should open in kiosk mode and display the specified webpage.</p>

    <h2>Configure custom settings (OPTIONAL)</h2>
    <p>Depending on your display and Pi configuration, it may be necessary to configure additional settings to achieve the desired functionality. Many of these settings can be found in The config.txt file, which is well documentedâ€”and the place to look first!</p>

    <h3>Dark theme</h3>
    <p>To prioritise dark themes, add the <code>--enable-features=WebUIDarkMode</code> and <code>--force-dark-mode</code> flags to the chromium-browser startup script command, like this:</p>
    <pre><code>chromium-browser --display=:0 --kiosk --incognito --window-position=0,0 --enable-features=WebUIDarkMode --force-dark-mode https://reelyactive.github.io/diy/pi-kiosk/</code></pre>
    <p>This should update the prefers-color-theme media feature which triggers compatible web pages & applications (ex: Bootstrap 5.3 and our own web-style-guide) to automatically render the desired theme.</p>
</body>
</html>
